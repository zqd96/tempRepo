#!/bin/bash

evptypes=("md4"
"md5"
"md5-sha1"
"blake2b512"
"blake2s256"
"sha1"
"sha224"
"sha384"
"sha512"
"sha512-224"
"sha512-256"
"sha3-224"
"sha3-256"
"sha3-512"
"shake128"
"shake256"
"mdc2"
"ripemd160"
"whirlpool"
"sm3"
"des-ecb"
"des-ede"
"des-ede3"
"des-ede-ecb"
"des-ede3-ecb"
"des-cfb1"
"des-cfb8"
"des-ede3-cfb1"
"des-ede3-cfb8"
"des-ofb"
"des-ede-ofb"
"des-ede3-ofb"
"des-cbc"
"des-ede-cbc"
"des-ede3-cbc"
"desx-cbc"
"rc4"
"rc4-40"
"rc4-hmac-md5"
"idea-ecb"
"idea-cfb64"
"idea-ofb"
"idea-cbc"
"rc2-ecb"
"rc2-cbc"
"rc2-40-cbc"
"rc2-64-cbc"
"rc2-ofb"
"bf-ecb"
"bf-cbc"
"bf-ofb"
"cast5-ecb"
"cast5-cbc"
"cast5-ofb"
"aes-128-ecb"
"aes-128-cbc"
"aes-128-cfb1"
"aes-128-cfb8"
"aes-128-ctr"
"aes-128-ccm"
"aes-128-gcm"
"aes-128-xts"
"aes-128-ocb"
"aes-192-ecb"
"aes-192-cbc"
"aes-192-cfb1"
"aes-192-cfb8"
"aes-192-ofb"
"aes-192-ctr"
"aes-192-ccm"
"aes-192-gcm"
"aes-192-xts"
"aes-192-ocb"
"aes-256-ecb"
"aes-256-cbc"
"aes-256-cfb1"
"aes-256-cfb8"
"aes-256-ofb"
"aes-256-ctr"
"aes-256-ccm"
"aes-256-gcm"
"aes-256-xts"
"aes-256-ocb"
"aria-128-ecb"
"aria-128-cbc"
"aria-128-cfb1"
"aria-128-cfb8"
"aria-128-ctr"
"aria-128-ofb"
"aria-128-gcm"
"aria-128-ccm"
"aria-192-ecb"
"aria-192-cbc"
"aria-192-cfb1"
"aria-192-cfb8"
"aria-192-ctr"
"aria-192-ofb"
"aria-192-gcm"
"aria-192-ccm"
"aria-256-ecb"
"aria-256-cbc"
"aria-256-cfb1"
"aria-256-cfb8"
"aria-256-ctr"
"aria-256-ofb"
"aria-256-gcm"
"aria-256-ccm"
"camellia-128-ecb"
"camellia-128-cbc"
"camellia-128-cfb1"
"camellia-128-cfb8"
"camellia-128-ofb"
"camellia-128-ctr"
"camellia-192-ecb"
"camellia-192-cbc"
"camellia-192-cfb1"
"camellia-192-cfb8"
"camellia-192-ofb"
"camellia-192-ctr"
"camellia-256-ecb"
"camellia-256-cbc"
"camellia-256-cfb1"
"camellia-256-cfb8"
"camellia-256-ofb"
"camellia-256-ctr"
"chacha20"
"chacha20-poly1305"
"seed-ecb"
"seed-cbc"
"seed-ofb"
"sm4-ecb"
"sm4-cbc"
"sm4-ofb"
"sm4-ctr")

noevptypes=("md2"
"mdc2"
"md4"
"md5"
"hmac"
"sha1"
"sha256"
"sha512"
"whirlpool"
"ripemd160"
"rc4"
"des-cbc"
"des-ede3"
"aes-128-cbc"
"aes-192-cbc"
"aes-256-cbc"
"aes-128-ige"
"aes-192-ige"
"aes-256-ige"
"rc2-cbc"
"rc5-cbc"
"idea-cbc"
"seed-cbc"
"bf-cbc"
"cast-cbc"
"dsa512"
"dsa1024"
"dsa2048"
"rsa512"
"rsa1024"
"rsa2048"
"rsa3072"
"rsa4096"
"rsa7680"
"rsa15360"
"ecdsap160"
"ecdsap192"
"ecdsap224"
"ecdsap256"
"ecdsap384"
"ecdsap521"
"ecdsak163"
"ecdsak233"
"ecdsak283"
"ecdsak409"
"ecdsak571"
"ecdsab163"
"ecdsab233"
"ecdsab283"
"ecdsab409"
"ecdsab571"
"ecdsabrp256r1"
"ecdsabrp256t1"
"ecdsabrp384r1"
"ecdsabrp384t1"
"ecdsabrp512r1"
"ecdsabrp512t1"
"ecdhp160"
"ecdhp192"
"ecdhp224"
"ecdhp256"
"ecdhp384"
"ecdhp521"
"ecdhk163"
"ecdhk233"
"ecdhk283"
"ecdhk409"
"ecdhk571"
"ecdhb163"
"ecdhb233"
"ecdhb283"
"ecdhb409"
"ecdhb571"
"ecdhbrp256r1"
"ecdhbrp256t1"
"ecdhbrp384r1"
"ecdhbrp384t1"
"ecdhbrp512r1"
"ecdhbrp512t1"
"ecdhx25519"
"ecdhx448"
"ed25519"
"ed448")
time=$(date "+%Y-%m-%d-%H:%M:%S")

length=(16 64 256 1024 8192 16384 32768 65536 131072 262144 524288 1048576 2097152 4194304 8388608 16777216)


echo ${time}
mkdir -p /home/ec2-user/tempRepo/${time}
resultfile="/home/ec2-user/tempRepo/${time}/${time}"


  for w in ${evptypes[*]}
  do
    for b in ${length[*]}
	do
		echo -e "${w} ${b}B \c" >> ${resultfile}
                /usr/local/ssl/bin/openssl speed -elapsed -multi 1 -bytes ${b} -evp ${w} > t.txt ; cat t.txt | grep evp >> ${resultfile}
                sleep 10
	done
  done
  
  
  for al in ${noevptypes[*]}
  do
    for by in ${length[*]}
	do
		echo -e "${al} ${by}B \c" >> ${resultfile}
                /usr/local/ssl/bin/openssl speed -elapsed -multi 1 -bytes ${by} ${al} > t.txt ; awk 'END {print}' t.txt >> ${resultfile}
                sleep 10
	done
  done
